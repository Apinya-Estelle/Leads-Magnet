<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ค้นหาสาเหตุผมบาง ผมร่วง - แบบประเมิน</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; }
        .question-step { display: none; animation: fadeIn 0.5s; }
        .question-step.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar-inner { transition: width 0.4s ease-in-out; }
        
        input[type="radio"], input[type="checkbox"] { display: none; }

        .quiz-option { transition: all 0.2s ease-in-out; }
        .quiz-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        input[type="radio"]:checked + label,
        input[type="checkbox"]:checked + label {
            border-color: #3b82f6;
            background-color: #eff6ff;
            box-shadow: 0 0 0 3px #3b82f6;
        }
        .image-option img {
            aspect-ratio: 1 / 1;
            object-fit: cover;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto px-4 py-8 md:py-12">
        <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
            
            <div class="text-center p-6 bg-gray-50 border-b">
                 <h1 class="text-2xl md:text-3xl font-bold text-gray-800">ค้นหาสาเหตุผมบาง ผมร่วง ผมขาดง่าย ของคุณ</h1>
            </div>

            <div class="w-full bg-gray-200">
                <div id="progressBar" class="bg-blue-600 h-2" style="width: 20%"></div>
            </div>

            <div class="p-6 md:p-10">
                <form id="hairQuizForm">
                    
                    <!-- Step 1: Physical Condition -->
                    <div id="step1" class="question-step active">
                        <label class="text-xl font-bold text-gray-800">ข้อ 1: สภาพเส้นผมปัจจุบัน ตรงกับภาพไหนที่สุด? <span class="text-red-500">*</span></label>
                        <p class="text-sm text-gray-500 mb-6">(เลือก 1 ข้อ)</p>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Image options generated by JS -->
                        </div>
                        <div class="mt-8 text-right">
                            <button type="button" class="next-btn w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 2: Internal Factors / Lifestyle (NEW) -->
                    <div id="step2" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 2: ช่วง 6 เดือนที่ผ่านมา มีปัจจัยเหล่านี้หรือไม่?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือกได้หลายข้อ)</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="quiz-option"><input type="checkbox" id="q2_1" name="q2_lifestyle" value="ความเครียดสูง"><label for="q2_1" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ความเครียดสูง/พักผ่อนน้อย</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q2_2" name="q2_lifestyle" value="เพิ่งเจ็บป่วยหนัก/ผ่าตัด"><label for="q2_2" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">เพิ่งเจ็บป่วยหนัก/ผ่าตัด</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q2_3" name="q2_lifestyle" value="ลดน้ำหนักอย่างรวดเร็ว"><label for="q2_3" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ลดน้ำหนักอย่างรวดเร็ว</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q2_4" name="q2_lifestyle" value="คุณแม่หลังคลอด"><label for="q2_4" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">เป็นคุณแม่หลังคลอด</label></div>
                             <div class="quiz-option"><input type="checkbox" id="q2_5" name="q2_lifestyle" value="ไม่มีปัจจัยดังกล่าว"><label for="q2_5" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ไม่มีปัจจัยดังกล่าว</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full">ย้อนกลับ</button>
                            <button type="button" class="next-btn w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 3: Behavioral Factors -->
                    <div id="step3" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 3: ในช่วง 1 ปีที่ผ่านมา ทำสิ่งเหล่านี้บ่อยแค่ไหน?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือกได้หลายข้อ)</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="quiz-option"><input type="checkbox" id="q3_1" name="q3_actions" value="ดัด/ยืดผม"><label for="q3_1" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ดัดผม หรือ ยืดผม</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_2" name="q3_actions" value="กัดสี/ทำสีผม"><label for="q3_2" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">กัดสี/ทำสีผมเป็นประจำ</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_3" name="q3_actions" value="ใช้ความร้อนกับผม"><label for="q3_3" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ใช้ความร้อนกับผมเกือบทุกวัน</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_4" name="q3_actions" value="ไม่ได้ทำอะไรเป็นพิเศษ"><label for="q3_4" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ไม่ได้ทำอะไรเป็นพิเศษ</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full">ย้อนกลับ</button>
                            <button type="button" class="next-btn w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 4: Current Solutions -->
                    <div id="step4" class="question-step">
                         <label class="text-xl font-bold text-gray-800">ข้อ 4: ตอนนี้คุณใช้อะไรอยู่บ้างในการแก้ปัญหา?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือกได้หลายข้อ)</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                             <div class="quiz-option"><input type="checkbox" id="q4_1" name="q4_solutions" value="ใช้แชมพูลดผมร่วง"><label for="q4_1" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ใช้แชมพู/ครีมนวดลดผมร่วง</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q4_2" name="q4_solutions" value="ใช้เซรั่ม"><label for="q4_2" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ใช้เซรั่ม / โทนิค</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q4_3" name="q4_solutions" value="ทานวิตามิน"><label for="q4_3" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ทานวิตามิน / อาหารเสริม</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q4_4" name="q4_solutions" value="พบแพทย์"><label for="q4_4" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">พบแพทย์ / คลินิก</label></div>
                             <div class="quiz-option"><input type="checkbox" id="q4_5" name="q4_solutions" value="ไม่ได้ทำอะไร"><label for="q4_5" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ไม่ได้ทำอะไร</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full">ย้อนกลับ</button>
                            <button type="button" class="next-btn w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 5: Duration -->
                    <div id="step5" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 5: กังวลกับปัญหานี้มานานแค่ไหนแล้ว?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือก 1 ข้อ)</p>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="quiz-option"><input type="radio" id="q5_1" name="q5_duration" value="น้อยกว่า 6 เดือน" required><label for="q5_1" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">น้อยกว่า 6 เดือน</label></div>
                            <div class="quiz-option"><input type="radio" id="q5_2" name="q5_duration" value="6 เดือน - 1 ปี"><label for="q5_2" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">6 เดือน - 1 ปี</label></div>
                            <div class="quiz-option"><input type="radio" id="q5_3" name="q5_duration" value="1 - 3 ปี"><label for="q5_3" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">1 - 3 ปี</label></div>
                            <div class="quiz-option"><input type="radio" id="q5_4" name="q5_duration" value="มากกว่า 3 ปี"><label for="q5_4" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">มากกว่า 3 ปี</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full">ย้อนกลับ</button>
                            <button type="submit" class="w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full">ดูผลการประเมิน</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('hairQuizForm');
            const steps = document.querySelectorAll('.question-step');
            const progressBar = document.getElementById('progressBar');
            let currentStep = 1;

            const imageOptions = [
                { id: 1, value: "หน้าผากคล้ายตัวM", imgSrc: "https://i.ibb.co/GQLv83s/1.jpg" },
                { id: 2, value: "ผมบางกลางกระหม่อม", imgSrc: "https://i.ibb.co/hZp4qfF/2.jpg" },
                { id: 3, value: "ศีรษะล้านด้านหน้า", imgSrc: "https://i.ibb.co/kSttCg2/3.jpg" },
                { id: 4, value: "ผมบางบริเวณขวัญ", imgSrc: "https://i.ibb.co/2d1P9Gk/4.jpg" },
                { id: 5, value: "ผมบางตามรอยแสก", imgSrc: "https://i.ibb.co/GczqWq1/5.jpg" },
                { id: 6, value: "ผมบางทั่วศีรษะ", imgSrc: "https://i.ibb.co/FmP72nK/6.jpg" }
            ];

            const step1Container = document.querySelector('#step1 .grid');
            imageOptions.forEach(opt => {
                step1Container.innerHTML += `
                    <div class="quiz-option image-option">
                        <input type="radio" id="q1_${opt.id}" name="q1_condition" value="${opt.value}" required>
                        <label for="q1_${opt.id}" class="block border border-gray-200 rounded-lg p-2 cursor-pointer text-center">
                            <img src="${opt.imgSrc}" alt="${opt.value}" class="w-full h-auto rounded-md mb-2">
                            <span class="text-sm font-medium text-gray-700">${opt.value}</span>
                        </label>
                    </div>`;
            });

            const showStep = (stepNumber) => {
                steps.forEach(step => step.classList.remove('active'));
                document.getElementById(`step${stepNumber}`).classList.add('active');
                progressBar.style.width = `${(stepNumber / steps.length) * 100}%`;
            };

            const validateStep = (stepNumber) => {
                const currentStepElement = document.getElementById(`step${stepNumber}`);
                const radios = currentStepElement.querySelectorAll('input[type="radio"][required]');
                if (radios.length === 0) return true;
                
                const radioGroupName = radios[0].name;
                if (!document.querySelector(`input[name="${radioGroupName}"]:checked`)) {
                    alert('กรุณาเลือกคำตอบก่อนไปขั้นตอนถัดไป');
                    return false;
                }
                return true;
            };

            form.addEventListener('click', function(e) {
                if (e.target.matches('.next-btn')) {
                    if (validateStep(currentStep)) {
                        currentStep++;
                        showStep(currentStep);
                    }
                } else if (e.target.matches('.back-btn')) {
                    currentStep--;
                    showStep(currentStep);
                }
            });

            form.addEventListener('submit', function(event) {
                event.preventDefault();
                const getRadioValue = (name) => document.querySelector(`input[name="${name}"]:checked`)?.value || "ไม่ได้เลือก";
                const getCheckboxValues = (name) => {
                    const values = [...document.querySelectorAll(`input[name="${name}"]:checked`)].map(cb => cb.value);
                    return values.length > 0 ? values.join(';') : "ไม่ได้เลือก";
                };

                const answers = {
                    q1: getRadioValue('q1_condition'),
                    q2: getCheckboxValues('q2_lifestyle'),
                    q3: getCheckboxValues('q3_actions'),
                    q4: getCheckboxValues('q4_solutions'),
                    q5: getRadioValue('q5_duration')
                };
                const params = new URLSearchParams(answers);
                window.location.href = `https://apinya-estelle.github.io/Result_Form/results_v2.html?${params.toString()}`;
            });
        });
    </script>
</body>
</html>
