<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ค้นหาสาเหตุผมบาง ผมร่วง - แบบประเมิน</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; }
        .question-step { display: none; animation: fadeIn 0.5s; }
        .question-step.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar-inner {
            transition: width 0.4s ease-in-out;
        }
        
        input[type="radio"], input[type="checkbox"] { display: none; }

        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        input[type="radio"]:checked + label,
        input[type="checkbox"]:checked + label {
            border-color: #3b82f6; /* blue-500 */
            background-color: #eff6ff; /* blue-50 */
            box-shadow: 0 0 0 3px #3b82f6;
        }

        /* Image option styling */
        .image-option img {
            aspect-ratio: 1 / 1;
            object-fit: cover;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto px-4 py-8 md:py-12">
        <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200">
                <div id="progressBar" class="bg-blue-600 text-xs font-medium text-blue-100 text-center p-1 leading-none h-4" style="width: 20%"></div>
            </div>

            <div class="p-6 md:p-10">
                <form id="hairQuizForm" class="space-y-8">
                    
                    <!-- Step 1 -->
                    <div id="step1" class="question-step active">
                        <label class="text-xl font-bold text-gray-800">ข้อ 1: สภาพเส้นผมของคุณในปัจจุบัน ตรงกับภาพไหนมากที่สุด? <span class="text-red-500">*</span></label>
                        <p class="text-sm text-gray-500 mb-6">(เลือก 1 ข้อ)</p>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Options will be generated by JS -->
                        </div>
                        <div class="mt-8 text-right">
                            <button type="button" class="next-btn w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div id="step2" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 2: ในช่วง 1 ปีที่ผ่านมา คุณทำสิ่งเหล่านี้บ่อยเพียงใด?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือกได้หลายข้อ)</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="quiz-option"><input type="checkbox" id="q2_1" name="q2_actions" value="ดัดผม หรือ ยืดผม"><label for="q2_1" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ดัดผม หรือ ยืดผม</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q2_2" name="q2_actions" value="กัดสีผม หรือ ทำสีผมเป็นประจำ"><label for="q2_2" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">กัดสี/ทำสีผมเป็นประจำ</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q2_3" name="q2_actions" value="เป่าผมหรือรีดผมด้วยความร้อนสูง"><label for="q2_3" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ใช้ความร้อนกับผมเกือบทุกวัน</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q2_4" name="q2_actions" value="ไม่ได้ทำอะไรตามข้างต้นเป็นพิเศษ"><label for="q2_4" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ไม่ได้ทำอะไรเป็นพิเศษ</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full transition duration-300">ย้อนกลับ</button>
                            <button type="button" class="next-btn w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div id="step3" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 3: ตอนนี้คุณใช้อะไรอยู่บ้างในการแก้ปัญหา?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือกได้หลายข้อ)</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                             <div class="quiz-option"><input type="checkbox" id="q3_1" name="q3_solutions" value="ใช้แชมพู/ครีมนวด สูตรลดผมร่วง"><label for="q3_1" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ใช้แชมพู/ครีมนวด สูตรลดผมร่วง</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_2" name="q3_solutions" value="ใช้เซรั่ม / โทนิค บำรุงหนังศีรษะ"><label for="q3_2" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ใช้เซรั่ม / โทนิค</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_3" name="q3_solutions" value="ทานวิตามิน / อาหารเสริม"><label for="q3_3" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ทานวิตามิน / อาหารเสริม</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_4" name="q3_solutions" value="พบแพทย์ผิวหนัง / คลินิกเส้นผม"><label for="q3_4" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">พบแพทย์ / คลินิก</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_5" name="q3_solutions" value="ปรับการกิน / การนอน / ลดความเครียด"><label for="q3_5" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ปรับการกิน / นอน / ลดเครียด</label></div>
                            <div class="quiz-option"><input type="checkbox" id="q3_6" name="q3_solutions" value="ไม่ได้ทำอะไร"><label for="q3_6" class="block border border-gray-200 rounded-lg p-4 cursor-pointer text-center">ไม่ได้ทำอะไร</label></div>
                        </div>
                         <input type="text" id="q3_other_text" name="q3_other_text" placeholder="กรณีเลือก 'อื่นๆ' โปรดระบุ..." class="mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full transition duration-300">ย้อนกลับ</button>
                            <button type="button" class="next-btn w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div id="step4" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 4: ปัญหาเส้นผมส่งผลกระทบต่อ "ความมั่นใจ" ของคุณมากน้อยเพียงใด?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือก 1 ข้อ)</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="quiz-option flex-1"><input type="radio" id="q4_1" name="q4_confidence" value="มากที่สุด"><label for="q4_1" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">มากที่สุด</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q4_2" name="q4_confidence" value="มาก"><label for="q4_2" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">มาก</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q4_3" name="q4_confidence" value="ปานกลาง"><label for="q4_3" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">ปานกลาง</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q4_4" name="q4_confidence" value="เล็กน้อย"><label for="q4_4" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">เล็กน้อย</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q4_5" name="q4_confidence" value="ไม่ส่งผลเลย"><label for="q4_5" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">ไม่ส่งผลเลย</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full transition duration-300">ย้อนกลับ</button>
                            <button type="button" class="next-btn w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">ถัดไป</button>
                        </div>
                    </div>

                    <!-- Step 5 -->
                    <div id="step5" class="question-step">
                        <label class="text-xl font-bold text-gray-800">ข้อ 5: คุณเริ่มกังวลเกี่ยวกับปัญหาเส้นผมมานานแค่ไหนแล้ว?</label>
                        <p class="text-sm text-gray-500 mb-6">(เลือก 1 ข้อ)</p>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="quiz-option flex-1"><input type="radio" id="q5_1" name="q5_duration" value="น้อยกว่า 6 เดือน"><label for="q5_1" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">น้อยกว่า 6 เดือน</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q5_2" name="q5_duration" value="6 เดือน - 1 ปี"><label for="q5_2" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">6 เดือน - 1 ปี</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q5_3" name="q5_duration" value="1 - 3 ปี"><label for="q5_3" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">1 - 3 ปี</label></div>
                            <div class="quiz-option flex-1"><input type="radio" id="q5_4" name="q5_duration" value="มากกว่า 3 ปี"><label for="q5_4" class="text-center block border border-gray-200 rounded-lg p-4 cursor-pointer">มากกว่า 3 ปี</label></div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button type="button" class="back-btn w-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full transition duration-300">ย้อนกลับ</button>
                            <button type="submit" class="w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full transition duration-300">ส่งผลประเมิน</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('hairQuizForm');
            const steps = document.querySelectorAll('.question-step');
            const progressBar = document.getElementById('progressBar');
            let currentStep = 1;

            const imageOptions = [
                { id: 1, value: "หน้าผากมีลักษณะคล้ายตัว M", imgSrc: "https://storage.googleapis.com/gemini-prod/images/05174780-1a22-487c-9e66-6f7f63116901" },
                { id: 2, value: "ผมบางกลางกระหม่อม ลักษณะไข่ดาว", imgSrc: "https://storage.googleapis.com/gemini-prod/images/56434493-aa94-469b-b0b3-1f148404a3ad" },
                { id: 3, value: "ศีรษะล้านมีผมด้านข้างเล็กน้อย", imgSrc: "https://storage.googleapis.com/gemini-prod/images/a59a721d-72c0-4828-b9a6-5ca4e55e3477" },
                { id: 4, value: "ผมบางบริเวณขวัญผม", imgSrc: "https://storage.googleapis.com/gemini-prod/images/b2c6e3d2-353b-4886-8a70-8b010c73229b" },
                { id: 5, value: "ผมบางตามรอยแสกผม", imgSrc: "https://storage.googleapis.com/gemini-prod/images/651f46d3-9580-4543-98fe-f00e95ca03e4" },
                { id: 6, value: "ผมบางแบบกระจายทั่วศีรษะ", imgSrc: "https://storage.googleapis.com/gemini-prod/images/8771465e-c01d-407b-a241-d5588523c0b1" }
            ];

            const step1Container = document.querySelector('#step1 .grid');
            imageOptions.forEach(opt => {
                step1Container.innerHTML += `
                    <div class="quiz-option image-option">
                        <input type="radio" id="q1_${opt.id}" name="q1_condition" value="${opt.value}" required>
                        <label for="q1_${opt.id}" class="block border border-gray-200 rounded-lg p-2 cursor-pointer text-center">
                            <img src="${opt.imgSrc}" alt="${opt.value}" class="w-full h-auto rounded-md mb-2">
                            <span class="text-sm font-medium text-gray-700">${opt.value}</span>
                        </label>
                    </div>
                `;
            });


            const showStep = (stepNumber) => {
                steps.forEach(step => step.classList.remove('active'));
                document.getElementById(`step${stepNumber}`).classList.add('active');
                const progress = (stepNumber / steps.length) * 100;
                progressBar.style.width = `${progress}%`;
            };

            const validateStep = (stepNumber) => {
                const currentStepElement = document.getElementById(`step${stepNumber}`);
                const inputs = currentStepElement.querySelectorAll('input[required], input[type="radio"]');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (input.type === 'radio') {
                        const radioGroup = document.getElementsByName(input.name);
                        if (![...radioGroup].some(r => r.checked)) {
                           isValid = false;
                        }
                    }
                });

                if (!isValid) {
                    alert('กรุณาเลือกคำตอบก่อนไปขั้นตอนถัดไป');
                }
                return isValid;
            };

            form.addEventListener('click', function(e) {
                if (e.target.matches('.next-btn')) {
                    if (validateStep(currentStep)) {
                        currentStep++;
                        showStep(currentStep);
                    }
                } else if (e.target.matches('.back-btn')) {
                    currentStep--;
                    showStep(currentStep);
                }
            });

            form.addEventListener('submit', function(event) {
                event.preventDefault();
                const getRadioValue = (name) => {
                    const radio = document.querySelector(`input[name="${name}"]:checked`);
                    return radio ? radio.value : "ไม่ได้เลือก";
                };
                const getCheckboxValues = (name) => {
                    const checkboxes = document.querySelectorAll(`input[name="${name}"]:checked`);
                    if (checkboxes.length === 0) return ["ไม่ได้เลือก"];
                    let values = [];
                    checkboxes.forEach((checkbox) => {
                        let value = checkbox.value;
                        if (value === "อื่นๆ") {
                            const otherText = document.getElementById('q3_other_text').value.trim();
                            value = otherText ? `อื่นๆ: ${otherText}` : 'อื่นๆ (ไม่ได้ระบุ)';
                        }
                        values.push(value);
                    });
                    return values;
                };

                const answers = {
                    q1: getRadioValue('q1_condition'),
                    q2: getCheckboxValues('q2_actions').join(';'),
                    q3: getCheckboxValues('q3_solutions').join(';'),
                    q4: getRadioValue('q4_confidence'),
                    q5: getRadioValue('q5_duration')
                };
                const params = new URLSearchParams(answers);
                window.location.href = `https://apinya-estelle.github.io/Result_Form/?${params.toString()}`;
            });

        });
    </script>
</body>
</html>

